package com.qdqtrj.lianlian.accp.repo;

import com.qdqtrj.lianlian.accp.pojo.AccpPayRecordModel;
import org.bson.types.ObjectId;
import org.springframework.data.mongodb.repository.Query;

import java.util.List;

/**
 * @author yinbin
 * @version 1.0
 * @date 2021/3/16
 */
public interface IAccpPayRecordRepo extends IbaseDao<AccpPayRecordModel, ObjectId> {

    /**
     * 根据流水号查询record
     *
     * @param txnSeqno
     * @return
     */
    //    @Query(value = "{$or:[{'req.user_id' : ?0},{'res.user_id' : ?0}]}")  // fixme junit 测试用，测试时需要打开这个注释行，注释掉下面注释
    @Query(value = "{$or:[{'req.txn_seqno' : ?0},{'res.txn_seqno' : ?0}]}")
    List<AccpPayRecordModel> findFirstByTxnSeqno(String txnSeqno);

    /**
     * 全库模糊搜索
     *
     * @param queryStr
     * @return
     */
    @Query(value = "{$or:[{'req.basicInfo.reg_email' : /?0/}, {'req.linked_bankcode' : /?0/}, {'res.refundInfo.refund_seqno' : /?0/}, {'req.new_linked_phone' : /?0/}, {'res.payerInfo.payer_type' : /?0/}, {'req.user_id' : /?0/}, {'req.wechatInfo.body' : /?0/}, {'req.linkedAcctInfo.linked_acctname' : /?0/}, {'req.bankCardInfo.id_no' : /?0/}, {'req.businessInfo.registered_capital' : /?0/}, {'req.payeeInfo.bank_acctname' : /?0/}, {'req.payeeInfo.payee_memo' : /?0/}, {'req.payeeInfo.payee_type' : /?0/}, {'req.refund_seqno' : /?0/}, {'req.user_type' : /?0/}, {'req.linked_brbankname' : /?0/}, {'req.ANDROID' : /?0/}, {'req.extend_params' : /?0/}, {'req.txn_type' : /?0/}, {'res.amt_bal' : /?0/}, {'req.id_filetype' : /?0/}, {'req.basicInfo.id_authority' : /?0/}, {'req.payeeInfo.bank_code' : /?0/}, {'req.basicInfo.id_type' : /?0/}, {'res.jno_acct' : /?0/}, {'req.orderInfo.txn_purpose' : /?0/}, {'res.amt' : /?0/}, {'req.bankcode' : /?0/}, {'req.confirmOrderInfo.confirm_seqno' : /?0/}, {'res.failure_reason' : /?0/}, {'req.wechatInfo.detail' : /?0/}, {'res.date_acct' : /?0/}, {'req.reg_phone' : /?0/}, {'req.orderInfo.txn_time' : /?0/}, {'req.pay_time_type' : /?0/}, {'req.appid' : /?0/}, {'res.orderInfo.txn_time' : /?0/}, {'res.map_arr' : /?0/}, {'req.businessInfo.scale' : /?0/}, {'req.device_info' : /?0/}, {'req.basicInfo.id_exp' : /?0/}, {'res.bank_account' : /?0/}, {'res.bankcode' : /?0/}, {'req.refundOrderInfo.payee_type' : /?0/}, {'req.basicAcctInfo.basicacct_no' : /?0/}, {'res.payInfo.accp_txno' : /?0/}, {'req.refundMethods.method' : /?0/}, {'req.linkedAcctInfo.linked_brbankname' : /?0/}, {'req.bankCardInfo.linked_phone' : /?0/}, {'req.orderInfo.order_info' : /?0/}, {'req.bankCardInfo.id_type' : /?0/}, {'req.payer_type' : /?0/}, {'req.id_no' : /?0/}, {'req.payerInfo.random_key' : /?0/}, {'req.H5' : /?0/}, {'req.jno_acct' : /?0/}, {'req.confirmOrderInfo.payee_id' : /?0/}, {'req.legalreptInfo.legalrept_name' : /?0/}, {'req.refundOrderInfo.payee_accttype' : /?0/}, {'req.device_version' : /?0/}, {'res.other_acct' : /?0/}, {'req.basicInfo.id_no' : /?0/}, {'res.orderInfo.order_info' : /?0/}, {'req.refund_reason' : /?0/}, {'req.refundOrderInfo.refund_time' : /?0/}, {'res.bank_code' : /?0/}, {'req.confirmOrderInfo.confirm_time' : /?0/}, {'req.id_type' : /?0/}, {'req.contactsInfo.contacts_phone' : /?0/}, {'req.payeeInfo.bank_acctno' : /?0/}, {'req.acct_type' : /?0/}, {'res.orderInfo.secure_status' : /?0/}, {'req.app_name' : /?0/}, {'res.user_status' : /?0/}, {'req.businessInfo.business_scope' : /?0/}, {'res.chnl_txno' : /?0/}, {'res.txn_time' : /?0/}, {'req.basicInfo.occupation' : /?0/}, {'req.unified_code' : /?0/}, {'req.flag_chnl' : /?0/}, {'res.txn_type' : /?0/}, {'req.alipayInfo.extend_params' : /?0/}, {'req.linked_acctname' : /?0/}, {'req.payerInfo.payer_type' : /?0/}, {'req.linkedAcctInfo.linked_acctno' : /?0/}, {'req.confirmOrderInfo.payee_type' : /?0/}, {'req.client_ip' : /?0/}, {'req.payeeInfo.cnaps_code' : /?0/}, {'req.user_name' : /?0/}, {'res.ret_msg' : /?0/}, {'req.confirm_mode' : /?0/}, {'req.open_sms_flag' : /?0/}, {'req.originalOrderInfo.txn_seqno' : /?0/}, {'res.total_in_amt' : /?0/}, {'res.reg_phone' : /?0/}, {'req.refundOrderInfo.payee_id' : /?0/}, {'req.date_end' : /?0/}, {'req.date_start' : /?0/}, {'req.legalreptInfo.legalrept_idno' : /?0/}, {'req.id_emblem' : /?0/}, {'req.linked_phone' : /?0/}, {'res.txn_seqno' : /?0/}, {'res.license' : /?0/}, {'res.status' : /?0/}, {'req.PC' : /?0/}, {'req.accp_txno' : /?0/}, {'res.remark' : /?0/}, {'req.alipayInfo.subject' : /?0/}, {'req.openid' : /?0/}, {'res.other_acct_name' : /?0/}, {'res.acceptInfo.accp_txno' : /?0/}, {'req.brabank_name' : /?0/}, {'req.legalreptInfo.legalrept_idexp' : /?0/}, {'req.orderInfo.txn_seqno' : /?0/}, {'req.checkInfo.check_user' : /?0/}, {'req.payerInfo.contract_id' : /?0/}, {'req.limit_card_type' : /?0/}, {'req.linked_acctno' : /?0/}, {'req.payerInfo.payer_accttype' : /?0/}, {'req.sort_type' : /?0/}, {'req.legalreptInfo.legalrept_phone' : /?0/}, {'res.oid_userno' : /?0/}, {'req.payerInfo.password' : /?0/}, {'res.acceptInfo.txn_seqno' : /?0/}, {'res.linked_agrtno' : /?0/}, {'req.payeeInfo.payee_accttype' : /?0/}, {'req.notify_url' : /?0/}, {'req.basicInfo.reg_phone' : /?0/}, {'req.payerInfo.method' : /?0/}, {'res.orderInfo.txn_seqno' : /?0/}, {'req.txn_seqno' : /?0/}, {'req.oid_partner' : /?0/}, {'res.oid_partner' : /?0/}, {'res.payerInfo.receive_amount' : /?0/}, {'res.ret_code' : /?0/}, {'req.linkedAcctInfo.linked_bankcode' : /?0/}, {'req.orderInfo.goods_name' : /?0/}, {'req.alipayInfo.seller_id' : /?0/}, {'req.reg_phone_new' : /?0/}, {'res.accp_txno' : /?0/}, {'req.payerInfo.user_id' : /?0/}, {'res.payload' : /?0/}, {'res.total_out_amt' : /?0/}, {'req.basicInfo.random_key' : /?0/}, {'req.basicInfo.user_name' : /?0/}, {'req.verify_code' : /?0/}, {'req.city_code' : /?0/}, {'req.basicInfo.password' : /?0/}, {'req.bankCardInfo.linked_acctname' : /?0/}, {'res.flag_dc' : /?0/}, {'req.bankCardInfo.linked_agrtno' : /?0/}, {'req.payerInfo.pap_agree_no' : /?0/}, {'req.password' : /?0/}, {'req.basicInfo.address' : /?0/}, {'req.return_url' : /?0/}, {'res.user_id' : /?0/}, {'req.password_new' : /?0/}, {'req.basicAcctInfo.basicacct_bankcode' : /?0/}, {'req.bankCardInfo.linked_acctno' : /?0/}, {'res.busi_type' : /?0/}, {'req.linkedAcctInfo.linked_brbankno' : /?0/}, {'req.payeeInfo.payee_id' : /?0/}, {'req.bankCardInfo.valid_thru' : /?0/}, {'req.pkg_name' : /?0/}, {'req.coupon_amount' : /?0/}, {'req.payer_id' : /?0/}, {'req.check_flag' : /?0/}, {'res.payerInfo.payer_id' : /?0/}, {'res.payerInfo.method' : /?0/}, {'res.gateway_url' : /?0/}, {'req.token' : /?0/}, {'res.random_value' : /?0/}, {'res.chnl_reason' : /?0/}, {'req.IOS' : /?0/}, {'req.checkInfo.check_result' : /?0/}, {'req.linkedAcctInfo.linked_phone' : /?0/}, {'req.refundOrderInfo.refund_seqno' : /?0/}, {'res.random_key' : /?0/}, {'req.contactsInfo.contacts_name' : /?0/}, {'req.id_portrait' : /?0/}, {'res.txn_status' : /?0/}, {'req.bank_code' : /?0/}, {'res.payInfo.txn_seqno' : /?0/}, {'res.refundInfo.accp_txno' : /?0/}, {'req.unified_code_filetype' : /?0/}, {'req.random_key' : /?0/}, {'res.accounting_date' : /?0/}, {'req.funds_flag' : /?0/}, {'res.memo' : /?0/}, {'req.checkInfo.check_reason' : /?0/}, {'req.payerInfo.payer_id' : /?0/}, {'req.orderInfo.goods_url' : /?0/}, {'req.linked_brbankno' : /?0/}, {'res.rsa_public_content' : /?0/}, {'res.oid_acctno' : /?0/}, {'req.flag_dc' : /?0/}, {'req.businessInfo.industry_code' : /?0/}, {'req.orderInfo.postscript' : /?0/}, {'req.linked_agrtno' : /?0/}, {'req.txn_time' : /?0/}, {'res.token' : /?0/}, {'req.bankCardInfo.cvv2' : /?0/}, {'req.verify_code_new' : /?0/}, {'res.finish_time' : /?0/}]}")
    List<AccpPayRecordModel> search(String queryStr);

}
